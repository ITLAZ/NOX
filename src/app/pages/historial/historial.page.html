<toolbar [pageTitle]="'Historial'" [showSearch]="false" [showCart]="false" [showNotifications]="false" [showBack]="true" (click)="navigateBack()"></toolbar>

<ion-content [fullscreen]="true" class="historial-content">

  <!-- Tabs -->
  <ion-segment [(ngModel)]="activeTab" color="success" class="historial-tabs">
    <ion-segment-button value="lugares">
      <ion-label>Lugares</ion-label>
    </ion-segment-button>
    <ion-segment-button value="eventos">
      <ion-label>Eventos</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Contenido: Lugares -->
  <ng-container *ngIf="activeTab === 'lugares'">
    <ion-text color="success" class="subtitle">
      <h2 class="section-title">Lugares visitados recientemente</h2>
    </ion-text>
    <swiper-container slides-per-view="1.2" space-between="10" navigation="false" pagination="false" class="historial-swiper" style="width: 375px; height: 350px;">
      <swiper-slide *ngFor="let lugar of lugares">
        <mid-card 
          [nombre]="lugar.nombre"
          [imagen]="lugar.imagen"
          [tipo]="lugar.tipo"
          [etiquetas]="lugar.etiquetas"
          [direccion]="lugar.direccion"
          [distancia]="lugar.distancia"
          [calificacion]="lugar.calificacion">
        </mid-card>
      </swiper-slide>
    </swiper-container>

    <ion-text color="success" class="subtitle">
      <h2 class="section-title">Historial de compra</h2>
    </ion-text>
    <ion-list lines="none">
      <ion-item *ngFor="let item of historialLugares" class="no-background">
        <ion-label>
          <ion-text color="secondary">
            <h3 class="compra-nombre">{{ item.nombre }}</h3>
          </ion-text>
          <p class="compra-fecha">{{ item.fecha }}</p>
        </ion-label>
        <ion-note slot="end" color="success">{{ item.precio }} Bs</ion-note>
      </ion-item>
    </ion-list>
  </ng-container>

  <!-- Contenido: Eventos -->
  <ng-container *ngIf="activeTab === 'eventos'">
    <ion-text color="success" class="subtitle">
      <h2 class="section-title">Eventos visitados recientemente</h2>
    </ion-text>
    <swiper-container slides-per-view="1.2" space-between="10" navigation="false" pagination="false" class="historial-swiper" style="width: 375px; height: 350px;">
      <swiper-slide *ngFor="let evento of eventos">
        <mid-card
          [nombre]="evento.nombre"
          [imagen]="evento.imagen"
          [tipo]="evento.tipo"
          [etiquetas]="evento.etiquetas"
          [direccion]="evento.direccion"
          [fecha]="evento.fecha"
          [calificacion]="evento.calificacion">
        </mid-card>
      </swiper-slide>
    </swiper-container>

    <ion-text color="success" class="subtitle">
      <h2 class="section-title">Historial de eventos</h2>
    </ion-text>
    <ion-list lines="none">
      <ion-item *ngFor="let item of historialEventos" class="no-background">
        <ion-label>
          <ion-text color="secondary">
            <h3 class="compra-nombre">{{ item.nombre }}</h3>
          </ion-text>
          <p class="compra-fecha">{{ item.fecha }}</p>
        </ion-label>
        <ion-note slot="end" color="success">{{ item.precio === 0 ? 'Gratis' : item.precio + ' Bs' }}</ion-note>
      </ion-item>
    </ion-list>
  </ng-container>

</ion-content>
